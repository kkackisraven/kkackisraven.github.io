<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEORAB Project Prototype</title>
    <style>
        /* [기본 설정] */
        body {
            margin: 0;
            padding: 0;
            background-color: #000; /* 레터박스 색상 */
            overflow: hidden; /* 스크롤 방지 */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Pretendard', sans-serif;
        }

        /* [방 전체 컨테이너] - 16:9 비율 유지 */
        .room-container {
            position: relative;
            width: 100%;
            max-width: 1920px; /* 적당한 최대 크기 */
            aspect-ratio: 16 / 9;
            background-color: #f0f0f0;
        }

        /* [모든 이미지 공통] - 겹쳐놓기 */
        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* 이미지는 클릭 통과 (핫스팟으로 제어) */
            transition: all 0.5s ease;
        }

        /* [1. 배경] */
        .bg-main {
            z-index: 1;
        }

        /* [2. 가운데 캐비닛] */
        .cabinet-center-group {
            z-index: 5;
        }
        .cabinet-center-moving {
            transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* [3. 왼쪽 서랍] */
        .drawer-left-group {
            z-index: 10; /* 캐비닛보다 위에 */
        }
        .drawer-left-moving {
            transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* [4. 스위치] */
        .switch-group {
            z-index: 20;
        }
        .switch-off-img {
            opacity: 0; /* 평소엔 숨김 */
        }

        /* === [인터랙션 & 애니메이션] === */

        /* 다크 모드 (방 어둡게) */
        .room-container.dark-mode .bg-main,
        .room-container.dark-mode .cabinet-center-group,
        .room-container.dark-mode .drawer-left-group {
            filter: brightness(0.3); /* 밝기 30%로 */
        }
        .room-container.dark-mode .switch-on-img { opacity: 0; }
        .room-container.dark-mode .switch-off-img { opacity: 1; }


        /* 왼쪽 서랍 열림 효과 */
        /* (좌표는 그림에 맞춰 미세 조정 필요 - 현재 임의값) */
        .drawer-left-group.open .drawer-left-moving {
            transform: translate(-3%, 4%); /* 왼쪽 아래로 이동 */
        }

        /* 가운데 캐비닛 열림 효과 */
        .cabinet-center-group.open .cabinet-center-moving {
            transform: translate(0%, 5%); /* 아래로 이동 (혹은 사선) */
        }


        /* === [클릭 존 (Hotspots)] === */
        /* 투명한 이미지가 전체를 덮고 있어서, 실제 클릭 위치를 잡아줘야 함 */
        .hotspot {
            position: absolute;
            cursor: pointer;
            z-index: 100;
            /* background: rgba(255, 0, 0, 0.3);  디버깅용 반투명 빨강 (나중에 주석 처리) */
        }

        /* 위치 잡기 (대략적인 % 좌표) */
        #spot-switch { top: 35%; left: 45%; width: 5%; height: 8%; }
        #spot-left-drawer { top: 60%; left: 35%; width: 12%; height: 15%; }
        #spot-center-cabinet { top: 50%; left: 52%; width: 12%; height: 15%; }

        /* 디버그 모드일 때만 핫스팟 보이기 */
        body.debug .hotspot { border: 2px solid red; background: rgba(255,0,0,0.2); }


        /* === [팝업 UI] === */
        .popup-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .popup-overlay.active { display: flex; }

        .popup-content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            text-align: center;
            min-width: 300px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        .popup-close {
            margin-top: 20px;
            padding: 10px 20px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
        }

    </style>
</head>
<body class=""> <div class="room-container" id="room">
        
        <img src="Main.png" class="layer bg-main" alt="배경">

        <div class="layer cabinet-center-group" id="cabinet-center-group">
            <img src="center_cabinet_blank.png" class="layer" alt="캐비닛 배경">
            <img src="center_cabinet_open.png" class="layer cabinet-center-moving" alt="캐비닛 알맹이">
        </div>

        <div class="layer drawer-left-group" id="drawer-left-group">
            <img src="left_drawer_blank.png" class="layer" alt="서랍 배경">
            <img src="left_drawer_open.png" class="layer drawer-left-moving" alt="서랍 알맹이">
        </div>

        <div class="layer switch-group">
            <img src="Switch_on.png" class="layer switch-on-img" alt="스위치 켜짐">
            <img src="Switch_off.png" class="layer switch-off-img" alt="스위치 꺼짐">
        </div>

        <div class="hotspot" id="spot-switch" onclick="toggleSwitch()"></div>
        <div class="hotspot" id="spot-left-drawer" onclick="toggleLeftDrawer()"></div>
        <div class="hotspot" id="spot-center-cabinet" onclick="toggleCenterCabinet()"></div>

    </div>

    <div class="popup-overlay" id="popup">
        <div class="popup-content">
            <h2 id="popup-title">Popup Title</h2>
            <p id="popup-text">내용이 들어갑니다.</p>
            <button class="popup-close" onclick="closePopup()">닫기</button>
        </div>
    </div>

    <script>
        // === 기능 스크립트 ===

        // 1. 스위치 (다크모드)
        let isDark = false;
        function toggleSwitch() {
            isDark = !isDark;
            const room = document.getElementById('room');
            if (isDark) {
                room.classList.add('dark-mode');
            } else {
                room.classList.remove('dark-mode');
            }
        }

        // 2. 왼쪽 서랍 열기
        function toggleLeftDrawer() {
            const group = document.getElementById('drawer-left-group');
            group.classList.toggle('open');
            
            // 열렸으면 팝업 띄우기 (애니메이션 시간 고려해서 0.6초 뒤에)
            if (group.classList.contains('open')) {
                setTimeout(() => {
                    showPopup("서랍 메뉴", "명함 | 설정 (임시 기능)");
                }, 600);
            }
        }

        // 3. 가운데 캐비닛 열기
        function toggleCenterCabinet() {
            const group = document.getElementById('cabinet-center-group');
            group.classList.toggle('open');

             // 열렸으면 작가 리스트 띄우기
             if (group.classList.contains('open')) {
                setTimeout(() => {
                    showPopup("작가 아카이브", "화린, 크렌, 까마구...");
                }, 600);
            }
        }

        // 팝업 관련
        function showPopup(title, text) {
            document.getElementById('popup-title').innerText = title;
            document.getElementById('popup-text').innerText = text;
            document.getElementById('popup').classList.add('active');
        }
        function closePopup() {
            document.getElementById('popup').classList.remove('active');
            
            // 팝업 닫으면 서랍들도 다시 닫아주기 (원위치)
            document.getElementById('drawer-left-group').classList.remove('open');
            document.getElementById('cabinet-center-group').classList.remove('open');
        }

    </script>
</body>
</html>
