<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SEORAB - EDITOR MODE</title>
    <style>
        body { background-color: #000; margin: 0; width: 100vw; height: 100vh; overflow: hidden; display: flex; }
        
        /* ì™¼ìª½ ì •ë³´ì°½ */
        #info-panel {
            width: 300px; background: #222; color: #fff; padding: 20px; font-family: monospace;
            z-index: 99999; border-right: 1px solid #444; overflow-y: auto;
        }
        #info-panel h3 { margin-top: 0; color: yellow; }
        textarea { width: 100%; height: 150px; background: #111; color: #0f0; border: 1px solid #444; }

        /* ë¬´ëŒ€ */
        #stage-container { flex-grow: 1; display: flex; justify-content: center; align-items: center; background: #333; }
        #stage {
            position: relative;
            width: 100%; max-width: 177.78vh; aspect-ratio: 16 / 9;
            background: #000; border: 2px solid cyan;
        }

        /* ì´ë¯¸ì§€ */
        .layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain; pointer-events: none; }
        .group { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .hidden { display: none !important; }

        /* [í•µì‹¬] ë“œë˜ê·¸ ê°€ëŠ¥í•œ ë¹¨ê°„ ë°•ìŠ¤ */
        .click-zone {
            position: absolute;
            z-index: 1000;
            background-color: rgba(255, 0, 0, 0.4);
            border: 2px solid red;
            cursor: move; /* ì´ë™ ì»¤ì„œ */
            resize: both; /* í¬ê¸° ì¡°ì ˆ ê°€ëŠ¥ (ì˜¤ë¥¸ìª½ ì•„ë˜ ëª¨ì„œë¦¬ ì¡ìœ¼ì„¸ìš”) */
            overflow: hidden;
            min-width: 20px; min-height: 20px;
        }
        /* ë°•ìŠ¤ ì´ë¦„ í‘œì‹œ */
        .click-zone::after {
            content: attr(data-name);
            color: white; font-size: 10px; padding: 2px; display: block; background: rgba(0,0,0,0.5);
        }

        /* ì´ˆê¸° ìœ„ì¹˜ (ëŒ€ì¶© ì¡ì•„ë‘ ) */
        #zone-switch { top: 35%; left: 45%; width: 5%; height: 8%; }
        #zone-drawer { top: 60%; left: 35%; width: 12%; height: 15%; }
        #zone-cabinet { top: 50%; left: 52%; width: 12%; height: 15%; }

    </style>
</head>
<body>

    <div id="info-panel">
        <h3>ğŸ‘· ê³µì‚¬íŒ ëª¨ë“œ</h3>
        <p>1. ë¹¨ê°„ ë°•ìŠ¤ë¥¼ ë“œë˜ê·¸í•´ì„œ ìœ„ì¹˜ë¥¼ ì¡ìœ¼ì„¸ìš”.<br>
           2. ë°•ìŠ¤ ì˜¤ë¥¸ìª½ ì•„ë˜ ëª¨ì„œë¦¬ë¥¼ ì¡ê³  í¬ê¸°ë¥¼ ì¡°ì ˆí•˜ì„¸ìš”.<br>
           3. ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•´ì„œ ì“°ì„¸ìš”.</p>
        <textarea id="result-code" readonly></textarea>
        <button onclick="updateCoords()" style="width:100%; padding:10px; margin-top:10px; cursor:pointer; background:yellow; border:none; font-weight:bold;">ì¢Œí‘œ ê°±ì‹  (ëˆ„ë¥´ì„¸ìš”)</button>
    </div>

    <div id="stage-container">
        <div id="stage">
            <img src="main.png?v=final" class="layer">
            <div id="group-drawer" class="group"><img src="left_drawer_default.png?v=final" class="layer"></div>
            <div id="group-cabinet" class="group"><img src="center_cabinet_default.png?v=final" class="layer"></div>
            <div id="group-switch" class="group"><img src="switch_on.png?v=final" class="layer"></div>

            <div class="click-zone" id="zone-switch" data-name="ìŠ¤ìœ„ì¹˜"></div>
            <div class="click-zone" id="zone-drawer" data-name="ì™¼ìª½ ì„œë"></div>
            <div class="click-zone" id="zone-cabinet" data-name="ê°€ìš´ë° ìºë¹„ë‹›"></div>
        </div>
    </div>

    <script>
        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥
        const zones = document.querySelectorAll('.click-zone');
        let activeItem = null;
        let activeX = 0;
        let activeY = 0;

        zones.forEach(zone => {
            zone.addEventListener('mousedown', dragStart);
        });

        function dragStart(e) {
            // ì˜¤ë¥¸ìª½ ì•„ë˜ ë¦¬ì‚¬ì´ì¦ˆ ì˜ì—­ í´ë¦­ ì‹œ ë“œë˜ê·¸ ë°©ì§€
            if (e.offsetX > e.target.clientWidth - 20 && e.offsetY > e.target.clientHeight - 20) return;
            
            activeItem = e.target;
            activeX = e.clientX - e.target.offsetLeft;
            activeY = e.clientY - e.target.offsetTop;
        }

        document.addEventListener('mousemove', (e) => {
            if (!activeItem) return;
            e.preventDefault();
            let x = e.clientX - activeX;
            let y = e.clientY - activeY;
            
            // í¼ì„¼íŠ¸ ë³€í™˜ì„ ìœ„í•´ ë¶€ëª¨ í¬ê¸° ê°€ì ¸ì˜¤ê¸°
            const parent = activeItem.parentElement;
            let percentX = (x / parent.clientWidth) * 100;
            let percentY = (y / parent.clientHeight) * 100;

            activeItem.style.left = percentX + "%";
            activeItem.style.top = percentY + "%";
        });

        document.addEventListener('mouseup', () => {
            activeItem = null;
            updateCoords(); // ë“œë˜ê·¸ ëë‚˜ë©´ ì¢Œí‘œ ê°±ì‹ 
        });

        // ì¢Œí‘œ ê³„ì‚°í•´ì„œ í…ìŠ¤íŠ¸ì°½ì— ë¿Œë ¤ì£¼ëŠ” í•¨ìˆ˜
        function updateCoords() {
            const stage = document.getElementById('stage');
            let result = "/* ë³µì‚¬í•´ì„œ CSSì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš” */\n";
            
            zones.forEach(zone => {
                // í˜„ì¬ í”½ì…€ ìœ„ì¹˜ë¥¼ %ë¡œ ë³€í™˜
                let t = (zone.offsetTop / stage.clientHeight * 100).toFixed(1);
                let l = (zone.offsetLeft / stage.clientWidth * 100).toFixed(1);
                let w = (zone.offsetWidth / stage.clientWidth * 100).toFixed(1);
                let h = (zone.offsetHeight / stage.clientHeight * 100).toFixed(1);
                
                result += `#${zone.id} { top: ${t}%; left: ${l}%; width: ${w}%; height: ${h}%; }\n`;
            });
            
            document.getElementById('result-code').value = result;
        }
    </script>
</body>
</html>
