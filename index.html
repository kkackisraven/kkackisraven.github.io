<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEORAB Project</title>
    <style>
        /* 1. 기본 설정 (검은 배경, 스크롤 삭제) */
        body {
            margin: 0; padding: 0;
            background-color: #000;
            width: 100vw; height: 100vh;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* 2. 무대 (Stage) - 16:9 비율 유지 */
        #stage {
            position: relative;
            width: 100%; height: 100%;
            max-width: 177.78vh; /* 16:9 비율 유지 */
            aspect-ratio: 16 / 9;
        }

        /* 3. 그룹 박스 (이미지 담는 통) */
        .group {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none; /* 클릭은 통과시키고 그림만 보여줌 */
        }

        /* === [중요] 그림 순서 (Z-Index) 정리 === */
        .bg-base { z-index: 1; }        /* 배경 (맨 뒤) */
        #group-drawer { z-index: 5; }   /* 왼쪽 서랍 (중간) */
        #group-cabinet { z-index: 15; } /* 가운데 캐비닛 (서랍보다 위!) */
        #group-switch { z-index: 20; }  /* 스위치 (맨 위) */

        /* 4. 이미지 공통 설정 */
        .layer {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: contain; /* 비율 유지하며 꽉 채움 */
            display: block;
        }

        /* 5. 숨김 처리 클래스 */
        .hidden { display: none !important; }

        /* === [6. 클릭 영역 (좌표 적용 완료)] === */
        .click-zone {
            position: absolute;
            z-index: 999; /* 모든 그림보다 위에 있어야 클릭됨 */
            cursor: pointer;
            /* 테스트용 빨간 테두리 제거함 (투명) */
            background-color: transparent; 
        }

        /* (1) 스위치 좌표 */
        #zone-switch { 
            top: 2.59%; left: 42.68%; width: 1.60%; height: 5.61%; 
        }

        /* (2) 가운데 캐비닛 좌표 */
        #zone-cabinet { 
            top: 39.67%; left: 44.00%; width: 13.65%; height: 11.80%; 
        }

        /* (3) 왼쪽 서랍 (폴리곤 좌표 적용!) */
        #zone-drawer {
            width: 100%; height: 100%; top: 0; left: 0;
            /* 사선 모양으로 클릭 영역 잘라내기 */
            clip-path: polygon(32.32% 76.56%, 44.01% 60.96%, 44.29% 65.55%, 33.21% 80.14%);
        }

    </style>
</head>
<body>

    <div id="stage">
        
        <img src="main.png?v=release" class="layer bg-base" id="bg-img">

        <div id="group-drawer" class="group">
            <img src="left_drawer_default.png?v=release" class="layer state-closed">
            <img src="left_drawer_blank.png?v=release" class="layer state-open hidden">
            <img src="left_drawer_open.png?v=release" class="layer state-open hidden">
        </div>

        <div id="group-cabinet" class="group">
            <img src="center_cabinet_default.png?v=release" class="layer state-closed">
            <img src="center_cabinet_blank.png?v=release" class="layer state-open hidden">
            <img src="center_cabinet_open.png?v=release" class="layer state-open hidden">
        </div>

        <div id="group-switch" class="group">
            <img src="switch_on.png?v=release" class="layer switch-on">
            <img src="switch_off.png?v=release" class="layer switch-off hidden">
        </div>

        <div class="click-zone" id="zone-switch" onclick="handleSwitch()"></div>
        <div class="click-zone" id="zone-drawer" onclick="handleDrawer()"></div>
        <div class="click-zone" id="zone-cabinet" onclick="handleCabinet()"></div>

    </div>

    <script>
        // === 기능 스크립트 ===
        
        // 1. 스위치 (다크모드)
        function handleSwitch() {
            const group = document.getElementById('group-switch');
            const on = group.querySelector('.switch-on');
            const off = group.querySelector('.switch-off');
            
            // 다크모드 적용 대상 (배경, 서랍, 캐비닛)
            const targets = [
                document.getElementById('bg-img'),
                document.getElementById('group-drawer'),
                document.getElementById('group-cabinet')
            ];

            if (off.classList.contains('hidden')) {
                // 끄기 (Dark Mode On)
                off.classList.remove('hidden');
                on.classList.add('hidden');
                targets.forEach(el => el.style.filter = "brightness(0.4)");
            } else {
                // 켜기 (Light Mode On)
                off.classList.add('hidden');
                on.classList.remove('hidden');
                targets.forEach(el => el.style.filter = "brightness(1)");
            }
        }

        // 2. 왼쪽 서랍 (다른 거 열려있으면 닫고 열기)
        function handleDrawer() { 
            closeAllExcept('group-drawer'); // 독점 모드 (하나만 열리게 하려면 주석 해제)
            toggleGroup('group-drawer'); 
        }

        // 3. 가운데 캐비닛
        function handleCabinet() { 
            closeAllExcept('group-cabinet'); 
            toggleGroup('group-cabinet'); 
        }

        // [공통] 열고 닫기
        function toggleGroup(id) {
            const group = document.getElementById(id);
            const closed = group.querySelector('.state-closed');
            const openImgs = group.querySelectorAll('.state-open');

            if (!closed.classList.contains('hidden')) {
                // 열기
                closed.classList.add('hidden');
                openImgs.forEach(img => img.classList.remove('hidden'));
            } else {
                // 닫기
                closed.classList.remove('hidden');
                openImgs.forEach(img => img.classList.add('hidden'));
            }
        }

        // [옵션] 다른 서랍 닫기 기능 (필요 없으면 삭제해도 됨)
        function closeAllExcept(activeId) {
            const ids = ['group-drawer', 'group-cabinet'];
            ids.forEach(id => {
                if (id === activeId) return; // 자기 자신은 패스
                const group = document.getElementById(id);
                const closed = group.querySelector('.state-closed');
                const openImgs = group.querySelectorAll('.state-open');
                
                // 강제로 닫음
                closed.classList.remove('hidden');
                openImgs.forEach(img => img.classList.add('hidden'));
            });
        }
    </script>
</body>
</html>
