<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEORAB - Debug Mode</title>
    <style>
        /* [1. 화면 강제 고정] */
        body {
            margin: 0;
            padding: 0;
            background-color: #111; /* 레터박스(빈공간) 색상 */
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* [2. 비율 유지 컨테이너] */
        /* 이미지가 4K든 뭐든 무조건 화면 안에 다 들어오게 만듦 */
        .stage {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* [3. 이미지 겹치기 공통] */
        .layer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* 정중앙 정렬 */
            
            /* 핵심: 이미지가 화면을 넘어가지 않게 제어 */
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            
            pointer-events: none; /* 클릭 통과 */
        }

        /* [4. 상태 관리 (보이기/숨기기)] */
        .hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        /* 다크모드 필터 */
        .dark-filter {
            filter: brightness(0.3);
            transition: filter 0.5s ease;
        }

        /* [5. 클릭 영역 (빨간 박스)] */
        .click-zone {
            position: absolute;
            z-index: 100;
            cursor: pointer;
            border: 2px solid red; /* 디버깅용 빨간 테두리 */
            background-color: rgba(255, 0, 0, 0.2); /* 붉은색 틴트 */
        }

        /* [위치 좌표 수정하는 곳]
           top: 위에서 몇 % 내려오는지
           left: 왼쪽에서 몇 % 떨어지는지
           width/height: 크기
           
           빨간 박스가 엉뚱한 곳에 있으면 이 숫자를 고치세요!
        */
        #zone-switch { top: 35%; left: 45%; width: 5%; height: 8%; }
        #zone-drawer { top: 60%; left: 35%; width: 12%; height: 15%; }
        #zone-cabinet { top: 50%; left: 52%; width: 12%; height: 15%; }

    </style>
</head>
<body>

    <div class="stage" id="stage">
        
        <img src="Main.png" class="layer bg-base dark-target">

        <div id="group-drawer" class="dark-target">
            <img src="left_drawer_default.png" class="layer state-closed">
            <img src="left_drawer_blank.png" class="layer state-open hidden">
            <img src="left_drawer_open.png" class="layer state-open hidden">
        </div>

        <div id="group-cabinet" class="dark-target">
            <img src="center_cabinet_default.png" class="layer state-closed">
            <img src="center_cabinet_blank.png" class="layer state-open hidden">
            <img src="center_cabinet_open.png" class="layer state-open hidden">
        </div>

        <div id="group-switch">
            <img src="Switch_on.png" class="layer switch-on">
            <img src="Switch_off.png" class="layer switch-off hidden">
        </div>

        <div class="click-zone" id="zone-switch" onclick="handleSwitch()"></div>
        <div class="click-zone" id="zone-drawer" onclick="handleDrawer()"></div>
        <div class="click-zone" id="zone-cabinet" onclick="handleCabinet()"></div>

    </div>

    <script>
        // === 기능 ===
        
        // 1. 스위치 (다크모드)
        let isDark = false;
        function handleSwitch() {
            isDark = !isDark;
            
            // 배경들 어둡게
            document.querySelectorAll('.dark-target').forEach(el => {
                el.style.filter = isDark ? "brightness(0.3)" : "brightness(1)";
            });

            // 스위치 그림 교체
            const group = document.getElementById('group-switch');
            if (isDark) {
                group.querySelector('.switch-on').classList.add('hidden');
                group.querySelector('.switch-off').classList.remove('hidden');
            } else {
                group.querySelector('.switch-on').classList.remove('hidden');
                group.querySelector('.switch-off').classList.add('hidden');
            }
        }

        // 2. 왼쪽 서랍 열기/닫기
        function handleDrawer() {
            toggleGroup('group-drawer');
        }

        // 3. 캐비닛 열기/닫기
        function handleCabinet() {
            toggleGroup('group-cabinet');
        }

        // [공통 함수] 그룹 상태 토글 (closed <-> open)
        function toggleGroup(id) {
            const group = document.getElementById(id);
            const closedImg = group.querySelector('.state-closed');
            const openImgs = group.querySelectorAll('.state-open');

            // 닫혀 있으면 -> 연다
            if (!closedImg.classList.contains('hidden')) {
                closedImg.classList.add('hidden'); // 닫힌 그림 숨김
                openImgs.forEach(img => img.classList.remove('hidden')); // 열린 그림들 보여줌
            } 
            // 열려 있으면 -> 닫는다
            else {
                closedImg.classList.remove('hidden');
                openImgs.forEach(img => img.classList.add('hidden'));
            }
        }
    </script>
</body>
</html>
