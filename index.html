<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEORAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: #000;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #stage {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 177.78vh;
            aspect-ratio: 16 / 9;
        }

        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
            pointer-events: none;
        }

        .hidden {
            display: none !important;
        }

        /* Z-Index 순서 */
        #bg { z-index: 1; }
        #drawer-closed, #drawer-open { z-index: 10; }
        #cabinet-default, #cabinet-cutout, #cabinet-open { z-index: 20; }
        #switch-on, #switch-off { z-index: 100; }

        /* 클릭 영역 */
        .zone {
            position: absolute;
            z-index: 999;
            cursor: pointer;
            background: transparent;
        }

        #zone-switch { top: 2.59%; left: 42.68%; width: 1.60%; height: 5.61%; }
        #zone-cabinet { top: 39.67%; left: 44.00%; width: 13.65%; height: 11.80%; }
        #zone-drawer {
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            clip-path: polygon(32.32% 76.56%, 44.01% 60.96%, 44.29% 65.55%, 33.21% 80.14%);
        }
    </style>
</head>
<body>
    <div id="stage">
        <img src="main.png" class="layer" id="bg">
        
        <img src="left_drawer_default.png" class="layer" id="drawer-closed">
        <img src="left_drawer_open.png" class="layer hidden" id="drawer-open">
        
        <img src="center_cabinet_default.png" class="layer" id="cabinet-default">
        <img src="center_cabinet_cutout.png" class="layer hidden" id="cabinet-cutout">
        <img src="center_cabinet_open.png" class="layer hidden" id="cabinet-open">
        
        <img src="switch_on.png" class="layer" id="switch-on">
        <img src="switch_off.png" class="layer hidden" id="switch-off">
        
        <div class="zone" id="zone-switch"></div>
        <div class="zone" id="zone-drawer"></div>
        <div class="zone" id="zone-cabinet"></div>
    </div>

    <script>
        const state = {
            dark: false,
            drawer: false,
            cabinet: false
        };

        const $ = id => document.getElementById(id);

        function render() {
            // 모든 요소 가져오기
            const bg = $('bg');
            const dClosed = $('drawer-closed');
            const dOpen = $('drawer-open');
            const cDefault = $('cabinet-default');
            const cCutout = $('cabinet-cutout');
            const cOpen = $('cabinet-open');
            const sOn = $('switch-on');
            const sOff = $('switch-off');

            // 모두 숨김 (초기화)
            [dClosed, dOpen, cDefault, cCutout, cOpen, sOn, sOff].forEach(el => el.classList.add('hidden'));

            // 서랍 상태
            (state.drawer ? dOpen : dClosed).classList.remove('hidden');

            // 캐비닛 상태
            if (state.cabinet) {
                cOpen.classList.remove('hidden');
            } else {
                (state.drawer ? cCutout : cDefault).classList.remove('hidden');
            }

            // 스위치 상태
            (state.dark ? sOff : sOn).classList.remove('hidden');

            // 밝기 필터
            const brightness = state.dark ? 'brightness(0.4)' : 'brightness(1)';
            [bg, dClosed, dOpen, cDefault, cCutout, cOpen].forEach(el => {
                el.style.filter = brightness;
            });
        }

        // 이벤트 핸들러
        $('zone-switch').onclick = () => {
            state.dark = !state.dark;
            render();
        };

        $('zone-drawer').onclick = () => {
            state.drawer = !state.drawer;
            render();
        };

        $('zone-cabinet').onclick = () => {
            state.cabinet = !state.cabinet;
            render();
        };

        // 초기 렌더링
        render();
    </script>
</body>
</html>
